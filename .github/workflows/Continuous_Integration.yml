# The name of the workflow we given here is 'Continuous Integration (CI)'
# as it will appear in the "Actions" tab of the GitHub repository.
name: Continuous Integration (CI)
run-name: ${{ github.actor }} is testing out GitHub Actions

# Controls when the action will run. Triggers the workflow on push or pull request.
on:
  push:
    branches:
      # We can define multiple branches as well 
      - feature/memo
  pull_request:
    branches:
      - master

# A workflow run is made up of one or more jobs that can run sequentially or in parallel.

jobs:
  # This workflow contains a single job called "build".
  build:
    #A runner is a server that runs your workflows when they're triggered. 
    #Each runner can run a single job at a time. GitHub provides Ubuntu Linux, Microsoft Windows,
    # and macOS runners to run your workflows
    # The type of runner that the job will run on -
    runs-on: windows-latest

    # Steps represent a sequence of tasks that will be executed as part of the job.
    steps:
      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it.
      
      # Here 'name' is for your step to display on GitHub.
      # and 'uses' Selects an action to run as part of a step in your job.
      - name: Checkout to the repository
        uses: actions/checkout@v2

      # Some actions require inputs that you must set using the 'with' .
      # set-up node version
      - name: Setup Node.js environment
        uses: actions/setup-node@v2-beta
        with:
          # Reads the node version from the .nvmrc file itself 
          node-version-file: '.nvmrc'
          # The node version can be hard-coded 
          # node-version: 14

      # install dependencies.
      - name: Install package dependencies
        run: npm install

      # Run test cases and this could ensure minimum coverage as well if set.
      - name: Execute test cases
        run: npm run test

      # - name: Create test build
      #   run: npm run build

      - name: Show Status
        env:
          MY_VAR: Hi !
          FIRST_NAME: Chandan
          Status: Continuous Integration has been Performed.
        run: |
          echo $MY_VAR $FIRST_NAME $Status.
